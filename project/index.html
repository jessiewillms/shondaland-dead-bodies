<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Greys</title>

	<!-- CSS -->
	<style>
		li {
			width: 10px;
			height: 10px;
			display: inline-block;
			background: lightgrey;
			border: 1px solid darkgrey;
			margin: 0 1px;
		}

		.wrap--full-height {
			height: 100vh;
		}
	</style>
</head>
<body>
	
	<header class="wrap--full-height">
		<p class="highlight">Get your person. And some tissues.</p>
		<h1>The great Grey's Anatomy body count.</h1>
		<p class="intro">"The human life is made up of choices. Yes or no. In or out. Up or down. And then there are the choices that matter. Love or hate. To be a hero or to be a coward. To fight or to give in. To live or die. Live or die, thatâ€™s the important choice. And itâ€™s not always in our hands."</p>

		<div class="credits">
			<p class="by"><a href="https://twitter.com/jessiewillms"><strong>By:</strong> Jessie Willms</a></p>
			<p><a href="http://greysanatomy.wikia.com/wiki/Grey%27s_Anatomy_Universe_Wiki">Information pulled from Grey's Anatomy Universe Wiki</a></p>
			<p class="by">And thanks to ðŸ‘‘ Shonda Rhimes ðŸ‘‘ for fourteen excellent, weepy years.</p>
		</div>
	</header>

	<section class="wrap--full-height">
		<h3>Gender breakdown</h3>

		<div id="js-gender-wrap">
			<p>All characters</p>
			<div id="js-gender-wrap--all"></div>
			
			<p>Major characters</p>
			<div id="js-gender-wrap--major"></div>
			
			<p>Minor characters</p>
			<div id="js-gender-wrap--minor"></div>
		</div>
	</section>
	<!-- Calendar -->
	<div id="js_ep_calendar"></div>

	<!-- JavaScript -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="scripts/papaparse.min.js"></script>
	<script>
	
	// Work with the data
	const process_details = function(details_data) {
		console.log(details_data);
	}

	// Work with the data now
	const process_episodes = function(episode_data) {
		console.log(episode_data);

		const ep_calendar = [];
		for (var i = 0; i < episode_data.length; i++) {
			
			ep_calendar.push(`<li data-lol="âš°" data-ep-num=${episode_data[i].episode_number} data-code=${episode_data[i].season_episode_code}></li>`)
			
			// if (episode_data[i].episode_number) {
			// }
		}

		$('#js_ep_calendar').html(ep_calendar);
	}


	// Get the data + process it with PapaParse
	const get_data = function(){

		const episodes_url = '1517179472.31episode-list.csv';
		
		Papa.parse(episodes_url, {
			download: true,
			header: true,
			// rest of config ...
			
			// when this is complete, send data to process function
			complete: function(results, file) {
				// console.log("Parsing complete:", results, file);
				episode_data = results.data;
				process_episodes(episode_data);
			}
		});


		const details_url = '1517179638.44character-details.csv';
		Papa.parse(details_url, {
			download: true,
			header: true,
			// rest of config ...
			
			// when this is complete, send data to process function
			complete: function(results, file) {
				// console.log("Parsing complete:", results, file);
				details_data = results.data;
				process_details(details_data);
			}
		});
	}

	$(document).ready(function() {
		get_data();
		// console.log( "ready!" );
	});

	</script>
	
</body>
</html>